<!doctype html>
<html>
<head>
  {{> common-meta }}

  <link href="/assets/stylesheets/full/screen.css" rel="stylesheet" type="text/css" media="screen" />

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/atom-one-light.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      var $toc = $('.toc')
      var $content = $('.content')

      //----------------------------
      // fixes toc next to content
      var debounceComputeSize = false
      var computeSize = function() {
        // 280 is the width of left nav / 15 is the margin with content
        $toc.css('left', $content.get('0').offsetLeft + $content.get('0').offsetWidth + 280 + 15 +'px')
        // 30 is the margin with bottom window
        $toc.css('max-height', window.innerHeight - $toc.get('0').offsetTop - 30  + 'px')
      }

      $(window).on('resize', function() {
        clearTimeout(debounceComputeSize)
        debounceComputeSize = setTimeout(computeSize, 20)
      })
      computeSize()
      //----------------------------

      //---------------------------------------------------------------------
      // toogle 'active' class on toc link when headings pass window offset
      var headings = {}
      var debounceActiveItem = false
      var computeActiveItem = function() {
        var lastPassedItem

        for (let key in headings) {
          headings[key].$link.removeClass('active')

          if (headings[key].offset <= window.pageYOffset + 70) {
            lastPassedItem = headings[key]
          }
        }

        if (lastPassedItem) {
          lastPassedItem.$link.addClass('active')
        }
      }

      $('a[href]', $toc).each(function(index, element) {
        var id = element.href.slice(element.href.indexOf('#'))
        var $ref = $(id).parent()

        if ($ref.length > 0) {
          headings[id] = {
            $ref: $ref,
            $link: $(element),
            offset: $ref.get('0').offsetTop
          }
        }
      })

      $(window).on('scroll', function() {
        clearTimeout(debounceActiveItem)
        debounceActiveItem = setTimeout(computeActiveItem, 10)
      })
      computeActiveItem()
      //---------------------------------------------------------------------

      function fallbackMessage(action) {
          var actionMsg = '';
          var actionKey = (action === 'cut' ? 'X' : 'C');
          if (/iPhone|iPad/i.test(navigator.userAgent)) {
              actionMsg = 'No support :(';
          } else if (/Mac/i.test(navigator.userAgent)) {
              actionMsg = 'Press âŒ˜-' + actionKey + ' to ' + action;
          } else {
              actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;
          }
          return actionMsg;
      }
      $('.hljs').each(function(index, element) {
        $(element).before('<button class="clipboard" title="copy code to clipboard" data-clipboard-snippet><i class="fa fa-clipboard" aria-hidden="true"></i></button>')
      })
      var clipboardSnippets = new Clipboard('[data-clipboard-snippet]',{
          target: function(trigger) {
              return trigger.nextElementSibling;
          }
      });
      var debounceClipboard = false
      clipboardSnippets.on('success', function(e) {
          e.clearSelection();
          $(e.trigger).text('Copied!')
          clearTimeout(debounceClipboard)
          debounceClipboard = setTimeout(function() {
            $(e.trigger).html('<i class="fa fa-clipboard" aria-hidden="true"></i>')
          }, 1200)
      });
      clipboardSnippets.on('error', function(e) {
        e.clearSelection();
        $(e.trigger).text(fallbackMessage(e.action))
        clearTimeout(debounceClipboard)
        debounceClipboard = setTimeout(function() {
          $(e.trigger).html('<i class="fa fa-clipboard" aria-hidden="true"></i>')
        }, 2400)
      });

      $('.language-tab-selector a').on('click', function(e) {
        e.preventDefault();
        e.stopPropagation();

        var language = $(this).data('languageName')

        $('.language-tab-active').removeClass('language-tab-active')
        $('.language-tab-selector a[data-language-name="' + language + '"]').addClass('language-tab-active')
        $('.language-tab[data-language="' + language + '"]').addClass('language-tab-active')
      })
    })
  </script>

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="/assets/javascripts/lib/_energize.js"></script>
  <script src="/assets/javascripts/app/_lang.js"></script>
  <script src="/assets/javascripts/app/_search.js"></script>
  <script src="/assets/javascripts/app/_toc.js"></script> -->
</head>

<body class="index">
{{> header }}

<!--
  <h1><a href="/{{ path }}">{{ title }}</a></h1>

  <p> {{{ description  }}}</p>
  <p> / {{ ancestry.path }} </p>
 -->

  <!-- <ul>
    <li><a href="/{{ link.to ancestry.root }}">home</a></li>

    {{#each ancestry.root.ancestry.children}}
      <li><a href="/{{ path }}">{{ title }}</a></li>
    {{/each}}
  </ul>

  <ul>
    <li><a href="/{{ ancestry.parent.path }}">back to {{ ancestry.parent.title }}</a></li>
    <li>siblings</li>
    {{#each ancestry.siblings}}
      <li><a href="/{{ path }}">{{ title }} to /{{ link.from ancestry.parent }}</a></li>
    {{/each}}
    <li>members</li>
    {{#each ancestry.members}}
      <li><a href="/{{ path }}">{{ title }} to /{{ link.from ancestry.parent }}</a></li>
    {{/each}}
    <li>children</li>
    {{#each ancestry.children}}
      <li><a href="/{{ path }}">{{ title }} to /{{ link.from ancestry.parent }}</a></li>
    {{/each}}
  </ul> -->

<div class="container">
  {{> nav-left }}

  <div class="page-wrapper">
    <div class="toc">
      <ul>
        {{#each toc}}
        <li class="toc-item toc-level-{{level}}">
            <a href="#{{ id }}" title="{{ title }}">
              {{ title }}
            </a>
        </li>
        {{/each}}
      </ul>
    </div>

    <div class="dark-box"></div>
    <div class="content">

      {{> nav-members }}

      <div class="main-content">
        {{{ contents }}}
        <div style="clear: both"></div>
      </div>

      {{> disqus }}

      {{> nav-members-bottom }}
    </div>
  </div>
</div>


{{> footer-scripts }}
</body>
</html>
