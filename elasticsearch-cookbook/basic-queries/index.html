<!doctype html><html><head><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=msapplication-TileColor content=#FFFFFF><meta name=msapplication-TileImage content=http://docs.kuzzle.io/assets/images/favicon/mstile-144x144.png><meta name=msapplication-square70x70logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-70x70.png><meta name=msapplication-square150x150logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-150x150.png><meta name=msapplication-wide310x150logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-310x150.png><meta name=msapplication-square310x310logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-310x310.png><meta name=google-site-verification content=luspUdq52gkUU0FFChQ2xmeXSs5HDafpARQ7fVXVBp4><meta itemprop=name content="Basic queries"><meta itemprop=image content=http://docs.kuzzle.io/assets/images/favicon/favicon-196x196.png><meta name=twitter:card value=summary><meta name=twitter:site content=@kuzzleio><meta name=twitter:title content="Basic queries"><meta name=twitter:creator content=@kuzzleio><meta name=twitter:image content=http://docs.kuzzle.io/assets/images/favicon/favicon-196x196.png><meta property=og:title content="Basic queries"><meta property=og:type content=article><meta property=og:site_name content=""><meta property=og:image content=http://docs.kuzzle.io/assets/images/favicon/favicon-96x96.png><meta property=article:published_time content=2017-06-26T09:50:09.176Z><meta property=article:modified_time content=2017-06-26T09:50:09.176Z><meta property=article:section content="Elasticsearch Cookbook"><meta property=article:tag content="Basic queries"><meta property=og:description content="learn how to search data with elasticsearch"><meta itemprop=description content="learn how to search data with elasticsearch"><meta name=twitter:description content="learn how to search data with elasticsearch"><meta name=description content="learn how to search data with elasticsearch"><link rel=apple-touch-icon-precomposed sizes=57x57 href=/assets/images/favicon/apple-touch-icon-57x57.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/assets/images/favicon/apple-touch-icon-114x114.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/assets/images/favicon/apple-touch-icon-72x72.png><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/favicon/apple-touch-icon-144x144.png><link rel=apple-touch-icon-precomposed sizes=60x60 href=/assets/images/favicon/apple-touch-icon-60x60.png><link rel=apple-touch-icon-precomposed sizes=120x120 href=/assets/images/favicon/apple-touch-icon-120x120.png><link rel=apple-touch-icon-precomposed sizes=76x76 href=/assets/images/favicon/apple-touch-icon-76x76.png><link rel=apple-touch-icon-precomposed sizes=152x152 href=/assets/images/favicon/apple-touch-icon-152x152.png><link rel=icon type=image/png href=/assets/images/favicon/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=/assets/images/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/images/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/images/favicon/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/assets/images/favicon/favicon-128.png sizes=128x128><link rel=stylesheet href=/assets/font-awesome/scss/font-awesome.css><link href="//fonts.googleapis.com/css?family=Ubuntu:400,500,700" rel=stylesheet><title>Basic queries - Elasticsearch Cookbook - Kuzzle documentation</title><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/atom-one-light.min.css><link href=/assets/stylesheets/full/screen.css rel=stylesheet type=text/css media=screen></head><body class=index><header><div class=wrapper><div id=logo><a href=http://kuzzle.io/ >&#xA0;</a></div><a class=mobile-nav-burger href=javascript:;></a><nav><ul><li><a href=http://kuzzle.io/kuzzle-entreprise class=nav-item>product</a></li><li><a href=http://docs.kuzzle.io/ class="nav-item developers active">Documentation</a><ul class=mobile-nav><li><a href=/guide><span>Guide</span></a></li><li><a href=/sdk-reference><span>SDK Reference</span></a></li><li><a href=/kuzzle-dsl><span>Kuzzle DSL</span></a></li><li><a href=/validation-reference><span>Data Validation</span></a></li><li><a href=/api-documentation><span>API Documentation</span></a></li><li><a href=/plugins-reference><span>Plugins Reference</span></a></li><li><a href=/kuzzle-events><span>Kuzzle events</span></a></li><li class=active><a href=/elasticsearch-cookbook><span>Elasticsearch Cookbook</span></a><ul class=sub-nav><li><a href=/elasticsearch-cookbook/installation><span>Installation</span></a></li><li><a href=/elasticsearch-cookbook/data-insertion><span>Data insertion</span></a></li><li><a href=/elasticsearch-cookbook/useful-commands><span>Useful commands</span></a></li><li class=active><a href=/elasticsearch-cookbook/basic-queries><span>Basic queries</span></a></li><li><a href=/elasticsearch-cookbook/bool-query><span>The bool (Boolean) query</span></a></li></ul></li></ul></li><li><a href=http://kuzzle.io/demos-tutorials/ class=nav-item>Demos</a></li><li><a href=http://kuzzle.io/blog/ class=nav-item>Blog</a></li><li><a href=http://kuzzle.io/contact/ class=nav-item>Contact</a></li><li><a href=http://kuzzle.io/install/ class=nav-item>Try it</a></li><li><a href=https://github.com/kuzzleio/kuzzle target=_blank class="nav-item github"><i class="icon icon-github icon-small"></i></a></li></ul></nav></div><div class="developer-nav open"><ul class=search><li><input name=search type=search placeholder=search tabindex=1></li></ul><ul class=nav><li><a href=/guide><span>Guide</span></a></li><li><a href=/sdk-reference><span>SDK Reference</span></a></li><li><a href=/kuzzle-dsl><span>Kuzzle DSL</span></a></li><li><a href=/validation-reference><span>Data Validation</span></a></li><li><a href=/api-documentation><span>API Documentation</span></a></li><li><a href=/plugins-reference><span>Plugins Reference</span></a></li><li><a href=/kuzzle-events><span>Kuzzle events</span></a></li><li class=active><a href=/elasticsearch-cookbook><span>Elasticsearch Cookbook</span></a></li></ul><div class=search-results><ul></ul></div><script type=text/plain id=search-results-template><li>
        <a href="__link__" tabindex="__tabindex__">
          <p class="page">
            <span class="title">__title__</span>
            <span class="firstMember">__firstMember__</span>
            <span class="parent">__parent__</span>
          </p>
          <p class="preview">__preview__</p>
        </a>
      </li></script></div></header><div class=container><div class=tocify-wrapper><ul class=search-results></ul><div class=tocify><ul class=tocify-header><li class="tocify-item tocify-focus tocify-hover"></li></ul><ul class=tocify-header><li class=tocify-item><a style="color: #111; text-decoration: none" href=http://docs.kuzzle.io/elasticsearch-cookbook title="back to Elasticsearch Cookbook home">Elasticsearch Cookbook</a></li><ul class=tocify-subheader><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/elasticsearch-cookbook/installation title="learn how to install elasticsearch from scratch">Installation</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/elasticsearch-cookbook/data-insertion title="learn how to index data with elasticsearch">Data insertion</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/elasticsearch-cookbook/useful-commands title="learn time-saving elasticsearch commands">Useful commands</a></li><li class="tocify-item tocify-focus"><a style="color: #FFF; text-decoration: none" href=# title="learn how to search data with elasticsearch">Basic queries</a></li><ul class=tocify-header><ul class=tocify-subheader></ul></ul><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/elasticsearch-cookbook/bool-query title="learn how to combine filters with elasticsearch">The bool (Boolean) query</a></li></ul></ul><ul class=toc-footer></ul></div></div><div class=page-wrapper><div class=toc><ul><li class="toc-item toc-level-1"><a href=#basic-queries title="Basic queries">Basic queries</a></li><li class="toc-item toc-level-2"><a href=#the-search-endpoint-and-the-match_all-query title="The search endpoint (and the match_all query)">The search endpoint (and the match_all query)</a></li><li class="toc-item toc-level-3"><a href=#without-query-parameters title="Without query parameters">Without query parameters</a></li><li class="toc-item toc-level-3"><a href=#with-from-and-size-query-parameters title="With from and size query parameters">With from and size query parameters</a></li><li class="toc-item toc-level-3"><a href=#the-scroll-query-parameter title="The scroll query parameter">The scroll query parameter</a></li><li class="toc-item toc-level-2"><a href=#the-ids-query title="The ids query">The ids query</a></li><li class="toc-item toc-level-2"><a href=#the-query_string-query title="The query_string query">The query_string query</a></li><li class="toc-item toc-level-2"><a href=#the-match-query title="The match query">The match query</a></li><li class="toc-item toc-level-2"><a href=#the-prefix-query title="The prefix query">The prefix query</a></li><li class="toc-item toc-level-2"><a href=#the-range-query title="The range query">The range query</a></li><li class="toc-item toc-level-2"><a href=#the-term-query title="The term query">The term query</a></li><li class="toc-item toc-level-2"><a href=#the-terms-query title="The terms query">The terms query</a></li><li class="toc-item toc-level-2"><a href=#the-exists-query title="The exists query">The exists query</a></li><li class="toc-item toc-level-2"><a href=#the-missing-query title="The missing query">The missing query</a></li><li class="toc-item toc-level-2"><a href=#sorting-the-result-set title="Sorting the result set">Sorting the result set</a></li></ul></div><div class=content><div class=mobile-breadcrumb><p style=float:left><a href=http://docs.kuzzle.io/ >Kuzzle documentation</a> &#xBB; <a href=http://docs.kuzzle.io/elasticsearch-cookbook>Elasticsearch Cookbook</a> &#xBB; Basic queries</p><p style=float:right class=version-selector><select onchange="window.location = this.value"><option selected>1.0.0</option></select></p></div><div class=nav-sibling><div class=nav-left><p><a href=https://github.com/kuzzleio/documentation/edit/master/src/elasticsearch-cookbook/basic-queries/index.md>edit on github<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span> <a href="https://github.com/kuzzleio/documentation/issues/new?labels=elasticsearch-cookbook&amp;title=Feedback%20about%20page%20&apos;elasticsearch-cookbook/basic-queries/index.md&apos;">send feedback about this content<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span><select class=rate-documentation><option value=""></option><option value=1>Unusable documentation</option><option value=2>Poor documentation</option><option value=3>OK documentation</option><option value=4>Good documentation</option><option value=5>Excellent documentation</option></select></p></div><div class=nav-right><p class=version-selector><span>current version:</span><select onchange="window.location = this.value"><option selected>1.0.0</option></select></p></div><div style=clear:both></div></div><div class=toc-inline><ul><li class="toc-item toc-level-1"><a href=#basic-queries title="Basic queries">Basic queries</a></li><li class="toc-item toc-level-2"><a href=#the-search-endpoint-and-the-match_all-query title="The search endpoint (and the match_all query)">The search endpoint (and the match_all query)</a></li><li class="toc-item toc-level-3"><a href=#without-query-parameters title="Without query parameters">Without query parameters</a></li><li class="toc-item toc-level-3"><a href=#with-from-and-size-query-parameters title="With from and size query parameters">With from and size query parameters</a></li><li class="toc-item toc-level-3"><a href=#the-scroll-query-parameter title="The scroll query parameter">The scroll query parameter</a></li><li class="toc-item toc-level-2"><a href=#the-ids-query title="The ids query">The ids query</a></li><li class="toc-item toc-level-2"><a href=#the-query_string-query title="The query_string query">The query_string query</a></li><li class="toc-item toc-level-2"><a href=#the-match-query title="The match query">The match query</a></li><li class="toc-item toc-level-2"><a href=#the-prefix-query title="The prefix query">The prefix query</a></li><li class="toc-item toc-level-2"><a href=#the-range-query title="The range query">The range query</a></li><li class="toc-item toc-level-2"><a href=#the-term-query title="The term query">The term query</a></li><li class="toc-item toc-level-2"><a href=#the-terms-query title="The terms query">The terms query</a></li><li class="toc-item toc-level-2"><a href=#the-exists-query title="The exists query">The exists query</a></li><li class="toc-item toc-level-2"><a href=#the-missing-query title="The missing query">The missing query</a></li><li class="toc-item toc-level-2"><a href=#sorting-the-result-set title="Sorting the result set">Sorting the result set</a></li></ul></div><div class=main-content><h1><a class=anchor id=basic-queries></a>Basic queries</h1><p>We will present here the most common ways to use the different search queries, together with the options that modify their behaviour. For more details about these options you can find more informations in the <a href=https://www.elastic.co/guide/en/elasticsearch/reference/5.x/query-dsl.html>Elasticsearch documentation</a>.</p><hr><h2><a class=anchor id=the-search-endpoint-and-the-match_all-query></a>The search endpoint (and the <code>match_all</code> query)</h2><p>The search endpoint allows different query parameters to control the output of the search. By defaut, the search endpoint will return the <strong>10</strong> first results, sorted by score. The <code>match_all</code> query returns all the documents in the collection, it can be useful with other queries in a <code>bool</code> query for instance.</p><h3><a class=anchor id=without-query-parameters></a>Without query parameters</h3><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>4</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>5</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.0</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;3&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate fish&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They do not bring the ball back&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;fish&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2017-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;5&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Will Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I admire lions&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so regal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;wild animal&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;lion&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-02&quot;</span>
      }
    } ]
  }
}</code></pre><p>Returns all the documents in the blogpost collection (because we have less than 10).</p><h3><a class=anchor id=with-from-and-size-query-parameters></a>With <code>from</code> and <code>size</code> query parameters</h3><p>To change this behaviour, 2 query parameters are available : <code>from</code> and <code>size</code>:</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&amp;from=3&amp;size=2&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>28</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>5</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.0</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;5&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Will Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I admire lions&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so regal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;wild animal&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;lion&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-02&quot;</span>
      }
    } ]
  }
}</code></pre><p>Returns the 4th and 5th result of the search query. This is very useful when you want to paginate the results.</p><h3><a class=anchor id=the-scroll-query-parameter></a>The <code>scroll</code> query parameter</h3><p>The <code>scroll</code> query parameter is useful when dealing with huge data sets, or when you want to be sure the data set will not change during your processing. We recommend you to read the <a href=https://www.elastic.co/guide/en/elasticsearch/reference/5.x/search-request-scroll.html>Elasticsearch documentation</a> for more details.</p><hr><h2><a class=anchor id=the-ids-query></a>The <code>ids</code> query</h2><p>Returns the documents with the matching <code>id</code>.</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;ids&quot;: {
      &quot;values&quot;: [&quot;2&quot;, &quot;4&quot;]
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>2</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>2</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.0</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-query_string-query></a>The <code>query_string</code> query</h2><p>The <code>query_string</code> query is a way to &quot;talk&quot; directly to the core engine of Elasticsearch. If you are used to use Solr, it will look familiar.</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;query_string&quot;: {
      &quot;query&quot;: &quot;_id:1 OR _id:2&quot;
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>6</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>2</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>0.35355338</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>0.35355338</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>0.35355338</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-match-query></a>The <code>match</code> query</h2><p>The <code>match</code> query is the one you want to use to perform a full text search. The query you use (here: &quot;hate cake&quot;) is analyzed (lowercased, tokenized ...) and then is applied against the analyzed version of the field (which is also lowercased, tokenized...). As a result, the choice of the analyzer applied to a field is very important. To know more about analyzers, we recommend you to read the <a href=https://www.elastic.co/guide/en/elasticsearch/reference/5.x/analysis-analyzers.html>Elasticsearch documentation</a>.</p><p>It results in a set of documents where a score is applied.</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;title&quot;:&quot;hate cake&quot;
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>3</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>2</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.2201192</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.2201192</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;3&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>0.23384948</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate fish&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They do not bring the ball back&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;fish&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2017-08-03&quot;</span>
      }
    } ]
  }
}</code></pre><p>You can see that the second document does not contain cake at all but is still matching. This is because, by default, the <code>match</code> query operator applies a <code>or</code> operand to the provided searched terms. To return documents matching all tokens, you have to use the <code>and</code> operator:</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;title&quot;: {
        &quot;query&quot;: &quot;hate cake&quot;,
        &quot;operator&quot;: &quot;and&quot;
      }
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>1</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.2201192</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.2201192</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-prefix-query></a>The <code>prefix</code> query</h2><p>The <code>prefix</code> query matches all the documents where the given field has a value that begins with the given string. In the following example, we want to match all the documents where the value of field status begins with <code>pub</code>:</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;prefix&quot;: {
      &quot;status&quot;:&quot;pub&quot;
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>107</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>2</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.0</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;5&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Will Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I admire lions&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so regal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;wild animal&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;lion&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-02&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-range-query></a>The <code>range</code> query</h2><p>The <code>range</code> query matches all the documents where the value of the given field is included within the specified range. In the following example, we want to match all the document where <code>published_date</code> is included within the two specified dates:</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;range&quot;: {
      &quot;publish_date&quot;: {
        &quot;gte&quot;: &quot;2016-08-01&quot;,
        &quot;lte&quot;: &quot;2016-08-31&quot;,
        &quot;format&quot;: &quot;yyyy-MM-dd&quot;
      }
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>6</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>3</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.0</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;5&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Will Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I admire lions&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so regal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;wild animal&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;lion&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-02&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-term-query></a>The <code>term</code> query</h2><p>The <code>term</code> query is used to find exact matches on the <em>indexed</em> value of a field. It should not be used on analyzed fields: the analyzed value that is indexed is a modified version of the input value. Analyzers are explain during the cookbook you can come back when it is clearer.</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;term&quot;: {
      &quot;status&quot;: &quot;pending&quot;
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>4</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>2</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.5108256</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.5108256</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;3&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.5108256</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate fish&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They do not bring the ball back&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;fish&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2017-08-03&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-terms-query></a>The <code>terms</code> query</h2><p>Behaves exactly like <code>term</code>, but with multiple possible exact matches.</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;terms&quot;: {
      &quot;status&quot;: [&quot;pending&quot;, &quot;archived&quot;]
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>1</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>3</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>0.7524203</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>0.7524203</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>0.46769896</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;3&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>0.46769896</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate fish&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They do not bring the ball back&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;fish&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2017-08-03&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-exists-query></a>The <code>exists</code> query</h2><p>The <code>exists</code> query matches the documents where a given field is present:</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;exists&quot;: {
      &quot;field&quot;: &quot;author&quot;
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>2</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>5</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-number>1.0</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;3&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate fish&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They do not bring the ball back&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;fish&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2017-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      }
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;5&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-number>1.0</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Will Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I admire lions&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They belong to the Savanna&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;wild animal&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;lion&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-02&quot;</span>
      }
    } ]
  }
}</code></pre><hr><h2><a class=anchor id=the-missing-query></a>The <code>missing</code> query</h2><p>The <code>missing</code> query has been removed in Elasticsearch 5.x. Elasticsearch recommends to use the <code>exists</code> query in a <code>must_not</code> occurence of a <code>bool</code> compound query (and this will introduce you to the <code>bool</code> query :-) ).</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;bool&quot;: {
      &quot;must_not&quot;: {
        &quot;exists&quot;: {
          &quot;field&quot;: &quot;author&quot;
        }
      }
    }
  }
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>4</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>0</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-literal>null</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ ]
  }
}</code></pre><hr><h2><a class=anchor id=sorting-the-result-set></a>Sorting the result set</h2><p>If you want to sort your result set in a different order than the <code>_score</code> default sort or compound the <code>_score</code> sort with other fields, you can specify the sort order alongside to the query:</p><pre><code class="hljs bash"><span class=hljs-meta>#!/bin/bash
</span>
curl -g -X POST <span class=hljs-string>&quot;http://localhost:9200/example/blogpost/_search?pretty&quot;</span> <span class=hljs-_>-d</span> <span class=hljs-string>&apos;{
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  },
  &quot;sort&quot;: [
    {&quot;status&quot;: {&quot;order&quot;: &quot;asc&quot;}}
  ]
}&apos;</span></code></pre><p>Reply:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;took&quot;</span> : <span class=hljs-number>9</span>,
  <span class=hljs-attr>&quot;timed_out&quot;</span> : <span class=hljs-literal>false</span>,
  <span class=hljs-attr>&quot;_shards&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;successful&quot;</span> : <span class=hljs-number>1</span>,
    <span class=hljs-attr>&quot;failed&quot;</span> : <span class=hljs-number>0</span>
  },
  <span class=hljs-attr>&quot;hits&quot;</span> : {
    <span class=hljs-attr>&quot;total&quot;</span> : <span class=hljs-number>5</span>,
    <span class=hljs-attr>&quot;max_score&quot;</span> : <span class=hljs-literal>null</span>,
    <span class=hljs-attr>&quot;hits&quot;</span> : [ {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;4&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-literal>null</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Jane Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate cheese cake&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;I prefer chocolat cake&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;food&quot;</span>, <span class=hljs-string>&quot;cake&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;archived&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;1985-08-03&quot;</span>
      },
      <span class=hljs-attr>&quot;sort&quot;</span> : [ <span class=hljs-string>&quot;archived&quot;</span> ]
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;1&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-literal>null</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I love cats&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so cute&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;cat&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-03&quot;</span>
      },
      <span class=hljs-attr>&quot;sort&quot;</span> : [ <span class=hljs-string>&quot;pending&quot;</span> ]
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;3&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-literal>null</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I hate fish&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They do not bring the ball back&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;fish&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;pending&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2017-08-03&quot;</span>
      },
      <span class=hljs-attr>&quot;sort&quot;</span> : [ <span class=hljs-string>&quot;pending&quot;</span> ]
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;2&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-literal>null</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;John Doe&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I like dogs&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are loyal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;pet&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;dog&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-01&quot;</span>
      },
      <span class=hljs-attr>&quot;sort&quot;</span> : [ <span class=hljs-string>&quot;published&quot;</span> ]
    }, {
      <span class=hljs-attr>&quot;_index&quot;</span> : <span class=hljs-string>&quot;example&quot;</span>,
      <span class=hljs-attr>&quot;_type&quot;</span> : <span class=hljs-string>&quot;blogpost&quot;</span>,
      <span class=hljs-attr>&quot;_id&quot;</span> : <span class=hljs-string>&quot;5&quot;</span>,
      <span class=hljs-attr>&quot;_score&quot;</span> : <span class=hljs-literal>null</span>,
      <span class=hljs-attr>&quot;_source&quot;</span> : {
        <span class=hljs-attr>&quot;author&quot;</span> : <span class=hljs-string>&quot;Will Smith&quot;</span>,
        <span class=hljs-attr>&quot;title&quot;</span> : <span class=hljs-string>&quot;I admire lions&quot;</span>,
        <span class=hljs-attr>&quot;body&quot;</span> : <span class=hljs-string>&quot;They are so regal&quot;</span>,
        <span class=hljs-attr>&quot;tags&quot;</span> : [ <span class=hljs-string>&quot;wild animal&quot;</span>, <span class=hljs-string>&quot;animal&quot;</span>, <span class=hljs-string>&quot;lion&quot;</span> ],
        <span class=hljs-attr>&quot;status&quot;</span> : <span class=hljs-string>&quot;published&quot;</span>,
        <span class=hljs-attr>&quot;publish_date&quot;</span> : <span class=hljs-string>&quot;2016-08-02&quot;</span>
      },
      <span class=hljs-attr>&quot;sort&quot;</span> : [ <span class=hljs-string>&quot;published&quot;</span> ]
    } ]
  }
}</code></pre><p>If the <code>_score</code> is not used in the sort, it is not calculated and nullified in the reply.</p><div style="clear: both"></div></div><hr><div id=disqus_thread></div><script async>var disqus_developer = 1;
      
        var disqus_config = function () {
          this.page.url = 'http://docs.kuzzle.io/elasticsearch-cookbook/basic-queries';
          this.page.title = 'Basic queries';
          this.page.identifier = 'elasticsearch-cookbook/basic-queries';
        };
      
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://kuzzle-documentation.disqus.com/embed.js';
          s.async = 'async';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();</script><div class="nav-sibling bottom"><div class=nav-left><p><a href=https://github.com/kuzzleio/documentation/edit/master/src/elasticsearch-cookbook/basic-queries/index.md>edit on github<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span> <a href="https://github.com/kuzzleio/documentation/issues/new?labels=elasticsearch-cookbook&amp;title=Feedback%20about%20page%20&apos;elasticsearch-cookbook/basic-queries/index.md&apos;">send feedback about this content<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span><select class=rate-documentation><option value=""></option><option value=1>Unusable documentation</option><option value=2>Poor documentation</option><option value=3>OK documentation</option><option value=4>Good documentation</option><option value=5>Excellent documentation</option></select></p></div><div class=nav-right><p class=medium-only><a href=http://docs.kuzzle.io/elasticsearch-cookbook/useful-commands>&#xAB; Useful commands</a> | <a href=http://docs.kuzzle.io/elasticsearch-cookbook/bool-query>The bool (Boolean) query &#xBB;</a></p><p><a href=#>back to top &#x2191;</a></p></div><div style=clear:both></div></div></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js></script><script src=//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js></script><script src=/assets/javascript/lib/jquery.barrating.js></script><script type=text/javascript>// store helper
  var store = function store(key, value) {
    var lsSupport = false;

    // Check for native support
    if (localStorage) {
      lsSupport = true;
    }

    // If value is detected, set new or modify store
    if (typeof value !== "undefined" && value !== null) {
      // Convert object values to JSON
      if ( typeof value === 'object' ) {
        value = JSON.stringify(value);
      }
      // Set the store
      if (lsSupport) { // Native support
        localStorage.setItem(key, value);
      } else { // Use Cookie
        createCookie(key, value, 30);
      }
    }

    // No value supplied, return value
    if (typeof value === "undefined") {
      // Get value
      if (lsSupport) { // Native support
        data = localStorage.getItem(key);
      } else { // Use cookie
        data = readCookie(key);
      }

      // Try to parse JSON...
      try {
        data = JSON.parse(data);
      }
      catch(e) {
        data = data;
      }

      return data;
    }

    // Null specified, remove store
    if (value === null) {
      if (lsSupport) { // Native support
        localStorage.removeItem(key);
      } else { // Use cookie
        createCookie(key, '', -1);
      }
    }

    /**
     * Creates new cookie or removes cookie with negative expiration
     * @param  key       The key or identifier for the store
     * @param  value     Contents of the store
     * @param  exp       Expiration - creation defaults to 30 days
     */
    function createCookie(key, value, exp) {
      var date = new Date();
      date.setTime(date.getTime() + (exp * 24 * 60 * 60 * 1000));
      var expires = "; expires=" + date.toGMTString();
      document.cookie = key + "=" + value + expires + "; path=/";
    }

    /**
     * Returns contents of cookie
     * @param  key       The key or identifier for the store
     */
    function readCookie(key) {
      var nameEQ = key + "=";
      var ca = document.cookie.split(';');
      for (var i = 0, max = ca.length; i < max; i++) {
        var c = ca[i];
        while (c.charAt(0) === ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }
  };






  // google analytics
  (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
              (i[r].q = i[r].q || []).push(arguments)
          }, i[r].l = 1 * new Date();
      a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-67035328-1', 'auto');
  ga('send', 'pageview');


  (function scrollToHash() {
    if (window.location.hash != '') {
      var anchor = $(location.hash).get(0);
      if (anchor) {
        anchor.scrollIntoView();
      }
    }
  })();




  (function mobileNavBuger() {
    var $body = $('body');

    $('.mobile-nav-burger').on('click', function() {
      $body.toggleClass('nav-burger-open');
    });
  })();







  (function rateDocumentation() {
    var $rateDocumentation = $('.rate-documentation');
    var pagePath = 'elasticsearch-cookbook/basic-queries'.replace(/\//g, '-');
    var categoryRating = parseInt(store('rate-documentation-' + pagePath));

    $rateDocumentation.barrating({
      theme: 'fontawesome-stars',
      initialRatting: 0,
      allowEmpty: true,
      onSelect: function(value, text, event) {
        if (typeof(event) !== 'undefined') {
          // rating was selected by a user
          store('rate-documentation-' + pagePath, event.target.dataset.ratingValue);
          $rateDocumentation.barrating('set', event.target.dataset.ratingValue);
          // $rateDocumentation.barrating('readonly', true); // wired on mobile

          ga('send', 'event', {
            eventCategory: 'documentation-rate',
            eventAction: 'http://docs.kuzzle.io/elasticsearch-cookbook/basic-queries',
            eventLabel: event.target.dataset.ratingText,
            transport: 'beacon'
          });

          window.setTimeout(function() {
            $('.br-current-rating').css('transition', 'opacity 0.15s');
            $('.br-current-rating').css('opacity', '0');

            window.setTimeout(function() {
              $('.br-current-rating').css('transition', 'opacity 0.9s');
              $('.br-current-rating').text("thank's for feedback !");
              $('.br-current-rating').css('opacity', '1');
            }, 140);
          }, 1);

          window.setTimeout(function() {
            $('.br-current-rating').css('opacity', '0');

            window.setTimeout(function() {
              $('.br-current-rating').css('transition', 'opacity 0.2s');
              if (event.target.dataset.ratingText === 'Excellent documentation') {
                $('.br-current-rating').text(event.target.dataset.ratingText + ' \\o/');
              }
              else {
                $('.br-current-rating').text(event.target.dataset.ratingText);
              }
              $('.br-current-rating').css('opacity', '1');
            }, 1000);
          }, 2500);
        }
        else {
          // rating was selected programmatically
          // by calling `set` method
        }
      }
    });

    $('.br-current-rating').addClass('visible');

    if (!isNaN(categoryRating)) {
      $rateDocumentation.barrating('set', categoryRating);
      $rateDocumentation.barrating('readonly', true);
    }
  })();











  (function leftNavUX() {
    var $wrapper = $('.tocify-wrapper');

    if ($wrapper.length !== 0) {
      var $selectedItem = $('.tocify-level-2.tocify-focus', $wrapper);

      if ($selectedItem.length === 0) {
        $selectedItem = $('.tocify-focus', $wrapper);
      }

      if ($selectedItem.get(0).offsetTop + 120 > $wrapper.height()) {
        $wrapper.scrollTop(Math.ceil($selectedItem.get(0).offsetTop - $wrapper.height() / 2));
      }
    }
  })();









  (function tocUX() {
    var $toc = $('.toc');
    var $content = $('.content');

    //----------------------------
    // fixes toc next to content
    if ($toc.length > 0) {
      var debounceComputeSize = false;
      var computeSize = function() {
        // 280 is the width of left nav / 15 is the margin with content
        $toc.css('left', $content.get('0').offsetLeft + $content.get('0').offsetWidth + 280 + 15 +'px');
        // 30 is the margin with bottom window
        $toc.css('max-height', window.innerHeight - $toc.get('0').offsetTop - 30  + 'px');
      }

      $(window).on('resize', function() {
        clearTimeout(debounceComputeSize);
        debounceComputeSize = setTimeout(computeSize, 13);
      })
      computeSize();
    }
    //----------------------------

    //---------------------------------------------------------------------
    // toogle 'active' class on toc link when headings pass window offset
    if ($toc.length > 0) {
      var headings = {};
      var debounceActiveItem = false;
      var computeActiveItem = function() {
        var lastPassedItem;

        for (let key in headings) {
          headings[key].$link.removeClass('active');

          if (headings[key].offset <= window.pageYOffset + 70) {
            lastPassedItem = headings[key];
          }
        }

        if (lastPassedItem) {
          lastPassedItem.$link.addClass('active');
        }
      }

      $('a[href]', $toc).each(function(index, element) {
        var id = element.href.slice(element.href.indexOf('#'));
        var $ref = $(id).parent();

        if ($ref.length > 0) {
          headings[id] = {
            $ref: $ref,
            $link: $(element),
            offset: $ref.get('0').offsetTop
          }
        }
      });

      $(window).on('scroll', function() {
        clearTimeout(debounceActiveItem);
        debounceActiveItem = setTimeout(computeActiveItem, 10);
      })
      computeActiveItem();
    }
    //---------------------------------------------------------------------
  })();

















  //---------------------------------------------------------------------
  // copy code to clipboard button
  (function codeClipboard() {
    $hljs = $('.hljs');

    if ($hljs.length > 0) {
      var debounceClipboard = false;
      var clipboardSnippets;

      function fallbackMessage(action) {
          var actionMsg = '';
          var actionKey = (action === 'cut' ? 'X' : 'C');
          if (/iPhone|iPad/i.test(navigator.userAgent)) {
              actionMsg = 'No support :(';
          } else if (/Mac/i.test(navigator.userAgent)) {
              actionMsg = 'Press -' + actionKey + ' to ' + action;
          } else {
              actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;
          }
          return actionMsg;
      }

      $hljs.each(function(index, element) {
        $(element).before('<button class="clipboard" title="copy code to clipboard" data-clipboard-snippet><i class="fa fa-clipboard" aria-hidden="true"></i></button>');
      })

      clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
          target: function(trigger) {
              return trigger.nextElementSibling;
          }
      });

      clipboardSnippets.on('success', function(e) {
          e.clearSelection();
          $(e.trigger).text('Copied!')

          clearTimeout(debounceClipboard);
          debounceClipboard = setTimeout(function() {
            $(e.trigger).html('<i class="fa fa-clipboard" aria-hidden="true"></i>');
          }, 1200);
      });
      clipboardSnippets.on('error', function(e) {
        e.clearSelection();
        $(e.trigger).text(fallbackMessage(e.action));

        clearTimeout(debounceClipboard);
        debounceClipboard = setTimeout(function() {
          $(e.trigger).html('<i class="fa fa-clipboard" aria-hidden="true"></i>');
        }, 2400);
      });
    }
  })();
  //---------------------------------------------------------------------








  //---------------------------------------------------------------------
  // language tab selector
  (function languageTabSelector() {
    var $languageTabSelector = $('.language-tab-selector a');
    var pageCategory = 'elasticsearch-cookbook'.replace(/\//g, '-');
    var selectedLanguage = store('selected-language' + pageCategory);

    if (selectedLanguage) {
      if ($('.language-tab[data-language="' + selectedLanguage + '"]').length > 0) {
        $('.language-tab-active').removeClass('language-tab-active');
        $('.language-tab-selector a[data-language-name="' + selectedLanguage + '"]').addClass('language-tab-active');
        $('.language-tab[data-language="' + selectedLanguage + '"]').addClass('language-tab-active');
      }
    }

    if ($languageTabSelector.length > 0) {
      $languageTabSelector.on('click touch', function(e) {
        e.preventDefault();
        e.stopPropagation();

        var language = $(this).data('languageName');

        $('.language-tab-active').removeClass('language-tab-active');
        $('.language-tab-selector a[data-language-name="' + language + '"]').addClass('language-tab-active');
        $('.language-tab[data-language="' + language + '"]').addClass('language-tab-active');

        store('selected-language' + pageCategory, language)
      });
    }
  })();
  //---------------------------------------------------------------------









  (function instantSearchUI() {
    var KEY_UP = 38;
    var KEY_DOWN = 40;
    var client = algoliasearch("4RFBRWISJR", "6febf1ebe906bd82bce58d5a20ac6c1b");
    var index = client.initIndex('kuzzle-documentation');
    var template = $('#search-results-template').html();
    var $searchInput = $('.search input[type=search]');
    var $searchResults = $('.search-results');
    var $searchResultsContainer = $('ul', $searchResults);
    var watchResultsDebounce = false;
    var selectedIndex = -1;
    var watchClose = false;
    var lastHits = 0;
    var _a = true;

    var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}


    // focus search input on content loaded
    $searchInput.focus();


    $(window).on('keydown', function (event) {
      if (watchClose) {
        var $results = $('a', $searchResultsContainer);
        var $focusResult = $('a:hover, a:focus', $searchResultsContainer);

        if ($focusResult.length > 0) {
          $results.each(function(index, element) {

            if ($results[index] === $focusResult.get(0)) {
              selectedIndex = index;
            }
          })
        }

        switch (event.keyCode) {
          case KEY_UP:
            event.stopPropagation();
            if (selectedIndex === 0) {
              selectedIndex = -1;
            }

            if (selectedIndex === -1) {
              $searchInput.focus();
              selectedIndex = $results.length - 1;
            }
            else {
              selectedIndex -= 1;
              $results.get(selectedIndex).focus();
            }
            //$('li:not(:last-child).selected').removeClass('selected').next().addClass('selected');

            return false;
          case KEY_DOWN:
            event.stopPropagation();
            if (selectedIndex >= $results.length -1) {
              $searchInput.focus();
              selectedIndex = -1;
            }
            else {
              selectedIndex += 1;
              $results.get(selectedIndex).focus();
            }
            //$('li:not(:first-child).selected').removeClass('selected').prev().addClass('selected');
            return false;
        }
      }
    });

    // search results open/close handlers
    $(window).on('click touch', function() {
      if (watchClose) {
        $searchResults.removeClass('display');
        watchClose = false;

        if (watchResultsDebounce) {
          window.clearTimeout(watchResultsDebounce);
        }
      }
    });

    $searchInput.on('click touch', function(event) {
      if (lastHits > 0) {
        $searchResults.addClass('display');
        watchClose = true;
      }
      event.stopPropagation();
    });

    $searchInput.on('focus', function(event) {
      if (lastHits > 0) {
        $searchResults.addClass('display');
        watchClose = true;
      }

      selectedIndex = -1;
    });

    $searchInput.on('blur', function(event) {
      if (lastHits > 0) {
        $searchResults.addClass('display');
        watchClose = true;
      }
    });
    // end - search results open/close handlers


    // main input listener
    $searchInput.on('input', function(event) {
      var $input = $(this);
      var searchResultsContent = '';
      // var length = (this.value.length + 1) * 6;

      selectedIndex = -1;

      // // resize input length to fit value
      // length = (length > 450) ? 450 : length;
      // this.style.width = (length > 220) ? length + 'px' : '220px';


      // clear search result on empty input
      if (this.value === '' || Base64.encode(this.value) === 'SGVscCBSeXUgYnkgY2xpY2tpbmcgeW91ciB3YXkgdGhyb3VnaCBkZXN0aW55IQ==') {
        $searchResults.removeClass('display');
        $searchResultsContainer.empty();
        watchClose = false;

        return;
      }

      if (_a) {
        console.warn(Base64.decode('WW91IG1pZ2h0IHdhbnQgdG8gYXNrIFJ5dSBmb3IgaGVscA=='));
        _a = false;
      }

      if (Base64.encode(this.value.toLowerCase()) === 'cnl1IGhlbHAgbWU=') {
        var d = document

        s = d.createElement('script');
        s.src = '/' + Base64.decode('YXNzZXRzL2phdmFzY3JpcHQvbGliL2pxdWVyeS5zb21ldGhpbmcuanM=');
        s.async = 'async';
        (d.head || d.body).appendChild(s);

        $searchResultsContainer.empty();
        $searchResults.removeClass('display');
        watchClose = false;

        this.disabled = true;
        this.value = Base64.decode('SGVscCBSeXUgYnkgY2xpY2tpbmcgeW91ciB3YXkgdGhyb3VnaCBkZXN0aW55IQ==');

        return;
      }

      index.search(this.value, function(err, res) {
        if (err) {
          console.error(err);
          return;
        }

        lastHits = res.hits.length;
        if (watchResultsDebounce) {
          window.clearTimeout(watchResultsDebounce);
        }

        if (lastHits === 0) {
          $searchResultsContainer.empty();
          $searchResults.removeClass('display');
          return;
        }

        // send ga event when user has search results but does nothing
        watchResultsDebounce = window.setTimeout(function() {
          ga('send', 'event', {
            eventCategory: 'documentation-search',
            eventAction: (lastHits > 0) ? '<watch_results>' : '<no_results>',
            eventLabel: $searchInput.val(),
            transport: 'beacon'
          });
        }, 4000);

        $searchResults.addClass('display');
        watchClose = true;

        // make search result item from
        for (var key in res.hits) {
          var content = template;

          // here we secure manualy all xml tags wich may can be retrieved by results, but we keep <em> tags for highlighting
          var elements = res.hits[key]._snippetResult.content.value.split('<em>');
          var preview = '';

          for (var k in elements) {
            elements[k] = elements[k].replace(/</g, '&lt;');
            elements[k] = elements[k].replace(/>/g, '&gt;');
          }

          // restore <em></em> tags
          preview = elements.join('<em>');
          preview = preview.replace(/&lt;\/em&gt;/g, '</em>');

          // replace variables in template
          content = content.replace(/__tabindex__/g, key + 2);
          content = content.replace(/__link__/g, 'http://docs.kuzzle.io/' + res.hits[key].path);
          content = content.replace(/__parent__/g, res.hits[key].parent || '');
          content = content.replace(/__firstMember__/g, res.hits[key].firstMember || '');
          content = content.replace(/__title__/g, res.hits[key]._highlightResult.title.value);
          content = content.replace(/__preview__/g, preview);

          searchResultsContent += content;
        }

        // add algolia copyright
        searchResultsContent += '<li style="text-align: right"><img src="https://www.algolia.com/assets/pricing_new/algolia-powered-by-ac7dba62d03d1e28b0838c5634eb42a9.svg" style="margin: 8px 8px 0 0;"></li>';

        // magic jQuery
        $searchResultsContainer.html(searchResultsContent);

        // send ga event on search result hit
        $('a', $searchResultsContainer).on('click touch', function(event) {
          ga('send', 'event', {
            eventCategory: 'documentation-search',
            eventAction: this.href,
            eventLabel: $searchInput.val(),
            transport: 'beacon'
          });
        });
      });
    });

  })();</script></body></html>